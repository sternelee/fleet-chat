# Fleet Chat Plugin System - Enhanced Implementation

åŸºäº Vicinae æ¶æ„æ€è·¯ï¼ŒFleet Chat ç°åœ¨æ‹¥æœ‰ä¸€ä¸ªå®Œæ•´çš„æ’ä»¶ç³»ç»Ÿï¼Œæä¾› Raycast å…¼å®¹çš„ APIï¼ŒåŒæ—¶å……åˆ†åˆ©ç”¨ Tauri çš„åŸç”Ÿèƒ½åŠ›ã€‚

## ğŸš€ æ–°å¢åŠŸèƒ½æ¨¡å—

### 1. raycast-api-compat æ¨¡å—
- **ä½ç½®**: `src/plugins/api-compat/`
- **åŠŸèƒ½**: æä¾› Raycast å…¼å®¹çš„ API æ¥å£
- **ä¸»è¦ç»„ä»¶**:
  - `index.ts` - ä¸»è¦å¯¼å‡ºæ¥å£
  - `clipboard.ts` - å‰ªè´´æ¿æ“ä½œ (Tauri æ’ä»¶é›†æˆ)
  - `filesystem.ts` - æ–‡ä»¶ç³»ç»Ÿæ“ä½œ (Tauri æ’ä»¶é›†æˆ)
  - `oauth.ts` - OAuth è®¤è¯æµç¨‹
  - `utils.ts` - å·¥å…·å‡½æ•°
  - `types.ts` - ç±»å‹å®šä¹‰

### 2. Extension Manager
- **ä½ç½®**: `src/plugins/extension-manager/`
- **åŠŸèƒ½**: æ’ä»¶ç”Ÿå‘½å‘¨æœŸç®¡ç†å’Œéš”ç¦»æ‰§è¡Œ
- **ç‰¹æ€§**:
  - Web Worker éš”ç¦»æ‰§è¡Œç¯å¢ƒ
  - æ’ä»¶çƒ­åŠ è½½/å¸è½½
  - æƒé™ç®¡ç†
  - é”™è¯¯å¤„ç†å’Œæ¢å¤

### 3. æ ¸å¿ƒ API æ¨¡å—
- **ä½ç½®**: `src/plugins/api/`
- **åŠŸèƒ½**: Fleet Chat æ’ä»¶å¼€å‘çš„æ ¸å¿ƒ API
- **ä¸»è¦æ¨¡å—**:
  - `api/index.ts` - ä¸»è¦ API å‡½æ•°
  - `api/applications.ts` - åº”ç”¨ç¨‹åºç®¡ç†
  - `api/environment.ts` - ç¯å¢ƒä¿¡æ¯
  - `api/storage.ts` - æ•°æ®å­˜å‚¨
  - `api/ui.ts` - UI å·¥å…·
  - `api/preferences.ts` - åå¥½è®¾ç½®
  - `api/ai.ts` - AI åŠŸèƒ½
  - `api/oauth.ts` - OAuth è®¤è¯

### 4. UI ç»„ä»¶
- **ä½ç½®**: `src/plugins/api/components/`
- **åŠŸèƒ½**: Raycast å…¼å®¹çš„ UI ç»„ä»¶
- **ç»„ä»¶**:
  - `List.ts` - åˆ—è¡¨ç»„ä»¶
  - `Grid.ts` - ç½‘æ ¼ç»„ä»¶
  - `Detail.ts` - è¯¦æƒ…ç»„ä»¶

## ğŸ”§ Tauri æ’ä»¶é›†æˆ

### å·²é›†æˆçš„å®˜æ–¹æ’ä»¶
```toml
# æ–°å¢åˆ° Cargo.toml
tauri-plugin-clipboard = "2"      # å‰ªè´´æ¿ç®¡ç†
tauri-plugin-fs = "2"           # æ–‡ä»¶ç³»ç»Ÿè®¿é—®
tauri-plugin-oauth = { version = "2", features = ["native-tls"] }  # OAuth è®¤è¯
```

### æ’ä»¶åŠŸèƒ½æ˜ å°„
| Raycast API | Tauri æ’ä»¶ | åŠŸèƒ½ |
|-------------|------------|------|
| `Clipboard` | `tauri-plugin-clipboard` | å‰ªè´´æ¿è¯»å†™ |
| `FileSystem` | `tauri-plugin-fs` | æ–‡ä»¶æ“ä½œ |
| `OAuth` | `tauri-plugin-oauth` | OAuth è®¤è¯ |
| `Shell` | `tauri-plugin-shell` | ç³»ç»Ÿå‘½ä»¤ |

## ğŸ—ï¸ æ¶æ„è®¾è®¡

### æ’ä»¶ç³»ç»Ÿæ¶æ„å›¾
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚             Fleet Chat App               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚           Plugin Manager                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Extension   â”‚ â”‚   Raycast API        â”‚ â”‚
â”‚  â”‚ Manager      â”‚ â”‚   Compatibility     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚            Web Workers                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Plugin A     â”‚ â”‚ Plugin B            â”‚ â”‚
â”‚  â”‚ (Isolated)   â”‚ â”‚ (Isolated)          â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚          Tauri Backend                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Core API    â”‚ â”‚  Tauri Plugins       â”‚ â”‚
â”‚  â”‚ Functions   â”‚ â”‚  (fs, clipboard, ...)â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### React-to-Lit ç¼–è¯‘æµç¨‹
```
Plugin React Component â†’ React-to-Lit Compiler â†’ Lit Component â†’ DOM Rendering
```

## ğŸ“ æ’ä»¶å¼€å‘æŒ‡å—

### åŸºæœ¬æ’ä»¶ç»“æ„
```typescript
// src/plugins/examples/my-plugin/src/index.ts
import { List, Detail, showToast } from '@fleet-chat/api';

export async function hello() {
  return (
    <Detail
      markdown="# Hello, Fleet Chat!"
      metadata={[{ label: "Status", text: "âœ… Working" }]}
    />
  );
}

export async function helloList() {
  const items = [
    { title: "Item 1", subtitle: "Description 1" },
    { title: "Item 2", subtitle: "Description 2" }
  ];

  return (
    <List>
      {items.map(item => (
        <List.Item
          title={item.title}
          subtitle={item.subtitle}
          actions={
            <ActionPanel>
              <Action title="Select" onAction={() => showToast({ title: item.title })} />
            </ActionPanel>
          }
        />
      ))}
    </List>
  );
}
```

### æ’ä»¶æ¸…å•
```json
{
  "name": "my-plugin",
  "title": "My Plugin",
  "description": "A sample plugin for Fleet Chat",
  "version": "1.0.0",
  "commands": [
    {
      "name": "hello",
      "title": "Hello",
      "description": "Shows a greeting",
      "mode": "view"
    }
  ]
}
```

## ğŸ”Œ å¯ç”¨çš„ API

### UI ç»„ä»¶
- **List**: äº¤äº’å¼åˆ—è¡¨ï¼Œæ”¯æŒæœç´¢å’Œæ“ä½œ
- **Grid**: å›¾åƒç½‘æ ¼å¸ƒå±€
- **Detail**: å¯Œæ–‡æœ¬å†…å®¹æ˜¾ç¤º
- **Form**: åŠ¨æ€è¡¨å•ç”Ÿæˆ
- **Action**: æ“ä½œæŒ‰é’®å’Œé¢æ¿

### ç³»ç»Ÿé›†æˆ
- **Clipboard**: å‰ªè´´æ¿è¯»å†™ (Tauri æ’ä»¶)
- **FileSystem**: æ–‡ä»¶ç³»ç»Ÿæ“ä½œ (Tauri æ’ä»¶)
- **Applications**: åº”ç”¨ç¨‹åºç®¡ç†
- **Notifications**: ç³»ç»Ÿé€šçŸ¥

### æ•°æ®å­˜å‚¨
- **LocalStorage**: æŒä¹…åŒ–æœ¬åœ°å­˜å‚¨
- **Cache**: å¸¦è¿‡æœŸæ—¶é—´çš„ç¼“å­˜
- **Preferences**: ç”¨æˆ·åå¥½è®¾ç½®

### é«˜çº§åŠŸèƒ½
- **OAuth**: OAuth è®¤è¯æµç¨‹
- **AI**: AI åŠŸèƒ½é›†æˆ
- **Navigation**: å¯¼èˆªæ§åˆ¶
- **Environment**: ç¯å¢ƒä¿¡æ¯è·å–

## ğŸ› ï¸ å¼€å‘å·¥å…·

### æ’ä»¶å¼€å‘å‘½ä»¤
```bash
# åˆ›å»ºæ–°æ’ä»¶
pnpm create:plugin my-plugin

# å¼€å‘æ¨¡å¼
pnpm dev:plugin my-plugin

# æ„å»ºæ’ä»¶
pnpm build:plugin my-plugin

# æµ‹è¯•æ’ä»¶
pnpm test:plugin my-plugin
```

### è°ƒè¯•åŠŸèƒ½
- **æ’ä»¶ç›‘æ§**: å®æ—¶æ€§èƒ½å’Œå†…å­˜ä½¿ç”¨
- **çƒ­é‡è½½**: å¼€å‘æ—¶è‡ªåŠ¨é‡è½½æ’ä»¶
- **é”™è¯¯è¾¹ç•Œ**: ä¼˜é›…çš„é”™è¯¯å¤„ç†
- **æ—¥å¿—ç³»ç»Ÿ**: è¯¦ç»†çš„æ’ä»¶æ‰§è¡Œæ—¥å¿—

## ğŸ”’ å®‰å…¨ç‰¹æ€§

### æ’ä»¶éš”ç¦»
- **Web Worker**: æ¯ä¸ªæ’ä»¶åœ¨ç‹¬ç«‹çš„ Web Worker ä¸­è¿è¡Œ
- **æƒé™æ§åˆ¶**: åŸºäºæ¸…å•çš„æƒé™ç®¡ç†
- **API éªŒè¯**: æ‰€æœ‰ API è°ƒç”¨éƒ½ç»è¿‡éªŒè¯
- **èµ„æºé™åˆ¶**: å†…å­˜å’Œæ‰§è¡Œæ—¶é—´é™åˆ¶

### æ•°æ®å®‰å…¨
- **æ²™ç®±æ‰§è¡Œ**: é™åˆ¶æ’ä»¶è®¿é—®ç³»ç»Ÿèµ„æº
- **å†…å®¹å®‰å…¨**: CSP å’Œè¾“å…¥éªŒè¯
- **å®‰å…¨é€šä¿¡**: åŠ å¯†çš„æ’ä»¶é€šä¿¡

## ğŸ“Š æ€§èƒ½ä¼˜åŒ–

### ç¼–è¯‘ä¼˜åŒ–
- **React-to-Lit**: é«˜æ•ˆçš„ç»„ä»¶ç¼–è¯‘
- **æ¨¡æ¿ç¼“å­˜**: ç¼–è¯‘ç»“æœç¼“å­˜
- **æ‡’åŠ è½½**: æŒ‰éœ€åŠ è½½æ’ä»¶

### è¿è¡Œæ—¶ä¼˜åŒ–
- **æ™ºèƒ½ç¼“å­˜**: LRU ç¼“å­˜ç­–ç•¥
- **å†…å­˜ç®¡ç†**: è‡ªåŠ¨åƒåœ¾å›æ”¶
- **èµ„æºç›‘æ§**: å®æ—¶æ€§èƒ½ç›‘æ§

## ğŸ¯ å…¼å®¹æ€§

### Raycast API å…¼å®¹æ€§
- âœ… **å®Œå…¨å…¼å®¹**: æ‰€æœ‰æ ¸å¿ƒ Raycast API
- âœ… **æ‰©å±•åŠŸèƒ½**: é¢å¤–çš„ Fleet Chat ç‰¹æœ‰åŠŸèƒ½
- âœ… **ç±»å‹å®‰å…¨**: å®Œæ•´çš„ TypeScript æ”¯æŒ

### è·¨å¹³å°æ”¯æŒ
- âœ… **macOS**: å®Œæ•´æ”¯æŒ
- âœ… **Windows**: å®Œæ•´æ”¯æŒ  
- âœ… **Linux**: å®Œæ•´æ”¯æŒ

## ğŸ“š ç¤ºä¾‹æ’ä»¶

### å†…ç½®ç¤ºä¾‹
- **hello-world**: åŸºç¡€æ’ä»¶ç¤ºä¾‹
- **file-manager**: æ–‡ä»¶ç®¡ç†æ’ä»¶
- **system-info**: ç³»ç»Ÿä¿¡æ¯æ’ä»¶
- **ai-chat**: AI èŠå¤©æ’ä»¶

### ç¤¾åŒºæ’ä»¶
- **github**: GitHub é›†æˆ
- **slack**: Slack æ¶ˆæ¯
- **notion**: Notion æ•°æ®åº“
- **spotify**: Spotify æ§åˆ¶

## ğŸ”® æœªæ¥è§„åˆ’

### çŸ­æœŸç›®æ ‡
- [ ] æ’ä»¶å¸‚åœºå’Œåˆ†å‘
- [ ] æ›´å¤š Tauri æ’ä»¶é›†æˆ
- [ ] æ’ä»¶å¼€å‘å·¥å…·é“¾
- [ ] å›½é™…åŒ–æ”¯æŒ

### é•¿æœŸç›®æ ‡
- [ ] AI æ’ä»¶ç”Ÿæˆå™¨
- [ ] å¯è§†åŒ–æ’ä»¶ç¼–è¾‘å™¨
- [ ] æ’ä»¶æ€§èƒ½åˆ†æ
- [ ] ç¤¾åŒºæ’ä»¶ç”Ÿæ€

è¿™ä¸ªå¢å¼ºçš„æ’ä»¶ç³»ç»Ÿä¸º Fleet Chat æä¾›äº†ä¸ Raycast ç›¸åŒçš„æ˜“ç”¨æ€§ï¼ŒåŒæ—¶åˆ©ç”¨äº†ç°ä»£ Web æŠ€æœ¯å’Œ Tauri çš„è·¨å¹³å°èƒ½åŠ›ï¼Œä¸ºç”¨æˆ·æä¾›äº†æ›´å¼ºå¤§ã€æ›´çµæ´»çš„æ‰©å±•æ€§ã€‚